---
import Card from "./Card/index.astro";
import { getCollection } from "astro:content";

const books = (await getCollection("books")).sort((a, b) => {
  const dateA = a.data.finished?.getTime() || 0;
  const dateB = b.data.finished?.getTime() || 0;
  return dateB - dateA;
});
---

<Card colSpan="md:col-span-1" rowSpan="md:row-span-3" title="Book memo">
  <div class="flex flex-col gap-2">
    <ul class="text-sm font-light space-y-2">
      {books.slice(0, 5).map((book) => (
        <li class="border-b border-dashed border-neutral-700 pb-1">
          <a href={`/books/${book.id}`} class="hover:text-neutral-400 transition-colors">
            <span class="font-medium">{book.data.title}</span>
            <span class="text-gray-500 text-xs block">{book.data.author}</span>
          </a>
        </li>
      ))}
    </ul>
    <a href="/books" class="text-xs text-primary-400 hover:underline mt-2">
      All Books ({books.length}) â†’
    </a>
  </div>
</Card>
