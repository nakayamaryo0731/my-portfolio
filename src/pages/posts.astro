---
export const prerender = true;

import BasicLayout from "../layouts/BasicLayout.astro";
---

<BasicLayout title="All Posts - Ryo Nakayama" description="All posts from Blog, Zenn, and note">
  <main class="text-white m-auto px-6 py-12 max-w-5xl min-h-screen">
    <a href="/" class="text-sm text-gray-400 hover:text-white mb-4 inline-block">
      ‚Üê Back to Home
    </a>

    <h1 class="text-3xl font-bold mt-6 mb-4">All Posts</h1>

    <div class="flex gap-4 mb-6 text-sm" id="posts-summary">
      <span class="text-gray-400">Sources:</span>
      <span class="text-gray-500">Loading...</span>
    </div>

    <div class="flex gap-8">
      <!-- Sidebar -->
      <aside class="w-52 shrink-0 hidden md:block">
        <div class="sticky top-8 space-y-6">
          <!-- Archive -->
          <div>
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3">Archive</h3>
            <nav id="archive-nav" class="space-y-1">
              <div class="text-gray-500 text-sm">Loading...</div>
            </nav>
          </div>

          <!-- Tags -->
          <div id="tags-section" class="hidden">
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3">Tags</h3>
            <nav id="tags-nav" class="flex flex-wrap gap-2"></nav>
          </div>
        </div>
      </aside>

      <!-- Main content -->
      <div class="flex-1 min-w-0">
        <!-- Mobile filters -->
        <div class="md:hidden mb-6 space-y-3">
          <select id="archive-select" class="w-full bg-neutral-800 text-white text-sm rounded px-3 py-2 border border-neutral-700">
            <option value="">All posts</option>
          </select>
          <div id="tags-mobile" class="hidden flex-wrap gap-2"></div>
        </div>

        <!-- Results -->
        <div id="results-count" class="text-sm text-gray-500 mb-4"></div>

        <ul class="space-y-4" id="posts-list">
          <li class="text-gray-500">Loading posts...</li>
        </ul>
      </div>
    </div>
  </main>
</BasicLayout>

<style>
  body {
    justify-content: flex-start !important;
    height: auto !important;
    min-height: 100vh;
  }
</style>

<script>
  import "../lib/posts-page";
</script>
